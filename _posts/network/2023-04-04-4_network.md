---
layout: single
title: "[네트워크 기초] 04.IP주소를 사용한 데이터 통신(OSI 7계층 중 3계층)"
categories: 
  - Network
  - CS
---

## 3계층

- 기능: 다른 네트워크 대역을 연결하는 역할 + 패킷 경로 제어
- IP 주소:  WAN에서 통신할 때 사용하는 주소
- 3계층 프로토콜 종류
    - ARP 프로토콜: IP주소를 이용해 MAC 주소를 알아오는 역할
    - IPv4: WAN에서 통신할 때 사용
    - ICMP: 서로 통신되는지 확인할 때 사용

## 일반적인 IP 주소

### Classful IP 주소

| 클래스 | 네트워크 구분 | 시작 주소 | 마지막 주소 |
| --- | --- | --- | --- |
| A 클래스 | 0XXXXXXX, 첫 번째 필드 | 0.0.0.0 | 127.255.255.255 |
| B 클래스 | 10XXXXXX, 두 번째 필드 | 128.0.0.0 | 191.255.255.255 |
| C 클래스 | 110XXXXX, 세 번째 필드 | 192.0.0.0 | 223.255.255.255 |
| D 클래스(멀티캐스트용) | 1110XXXX | 224.0.0.0 | 239.255.255.255 |
| E 클래스(실험용) | 1111XXXX | 240.0.0.0 | 255.255.255.255 |

- 주소 범위 이진수 변환
    - A클래스: 00000000.00000000.00000000.00000000 ~ 01111111.11111111.11111111.11111111
    - B클래스: 10000000.00000000.00000000.00000000 ~ 10111111.11111111.11111111.11111111
    - C클래스: 11000000.00000000.00000000.00000000 ~ 11011111.11111111.11111111.11111111
    - D클래스: 11100000.00000000.00000000.00000000 ~ 11101111.11111111.11111111.11111111
    - E클래스: 11110000.00000000.00000000.00000000 ~ 11111111.11111111.11111111.11111111
- A 클래스
    - 각 클래스의 첫 번째 필드숫자로 네트워크 대역을 구분
        - A 클래스 네트워크 대역: 0. 0.0.0 ~ 127. 255.255.255
            
            → A 클래스 네트워크 대역 개수: 총 128개
            
    - 나머지 숫자로 네트워크 대역에 속해있는 컴퓨터 구분
        - A 클래스 컴퓨터: 0. 0.0.0 ~ 127. 255.255.255
            
            → 한 대역에 속한 컴퓨터 수: 총 (2^8) * (2^8) * (2^8)
            
    - 한 네트워크 대역에 매우 많은 컴퓨터가 속해있으므로 큰 기관 같은 곳에서 사용
- B 클래스(두 번째 필드숫자로 네트워크 대역 구분)
    - B 클래스 네트워크 대역: 128.0. 0.0 ~ 191.255. 255.255
    - 한 대역에 속한 컴퓨터 : 128.0. 0.0 ~ 191.255. 255.255
- C 클래스(세 번째 필드숫자로 네트워크 대역 구분)
    - C 클래스 네트워크 대역: 192.0.0. 0 ~ 223.255.255. 255
    - 한 대역에 속한 컴퓨터 : 192.0.0. 0 ~ 223.255.255. 255
    - 많은 수의 네트워크 대역을 사용할 수 있어서 일반적으로 많이 사용되었다.
- Classful IP 주소의 문제점
    - **낭비되는 IP 주소가 많다.**

### Classless IP 주소

- 기본의 방식과 다르게 서브넷 마스크를 사용해서 네트워크 대역을 임의의 지점에서 구분
- 서브넷 마스크
    - 네트워크 대역을 나눠주는데 사용하는 값
    - 1로 시작하고 1과 1사이에는 0이 올 수 없다
    - ex) 255.255.255.192 → 11111111.11111111.11111111.11000000
    1은 네트워크 대역을 구분하는데 사용하고 0은 컴퓨터를 구분하는데 사용
- 서브넷팅: 네트워크 대역을 쪼개는 것
- 슈퍼넷팅: 쪼개진 네트워크 대역을 합치는 것
- 장점: Classful IP주소에 비해 낭비되는 IP주소를 줄일 수 있다.
- 단점: IoT 장비가 많아짐에 따라 결국에는 IP주소의 낭비가 발생하여 네트워크 대역이 부족해진다.

### 사설 IP와 공인 IP

- 공인 IP: 실제 인터넷에서 통신할 때 사용하는 IP 주소
- 사설 IP: 같은 네트워크 대역에서 사용하는 IP 주소
- 같은 네트워크 대역에 있는 장비들은 다른 사설 IP를 사용하지만 인터넷에서 통신할 때는 모두 같은 공인 IP로 변환된다.
- NAT(Network Address Translation): 특정 IP를 특정 IP로 변환하는 기술, 이를 통해 사설 IP를 공인 IP로 변환하거나 공인 IP를 사설 IP로 변환한다.
- 실제 인터넷에서는 공인 IP로만 통신하고 외부 네트워트 대역에서는 사설 IP 대역이 보이지 않는다.
일반적으로 사설 IP는 외부로 요청 후 외부에서 응답하는 과정을 거친다. 그래서 요청없이 외부에서 바로 들어올 수는 없다.(포트포워딩으로 가능하게 할 수는 있음)

## 특수한 IP 주소

- 0.0.0.0:  나머지 모든 IP
- 127.0.0.1: 나 자신을 나타내는 주소
- 게이트웨이 주소: 어딘가로 보내기 위해 거쳐야 하는 주소(일반적으로 공유기 주소)